(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Index"],{"995a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-form-model",[a("a-form-model-item",{attrs:{label:"作者名称"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.name,callback:function(t){e.$set(e.profileInfo,"name",t)},expression:"profileInfo.name"}})],1),a("a-form-model-item",{attrs:{label:"个人简介"}},[a("a-input",{attrs:{type:"textarea"},model:{value:e.profileInfo.desc,callback:function(t){e.$set(e.profileInfo,"desc",t)},expression:"profileInfo.desc"}})],1),a("a-form-model-item",{attrs:{label:"QQ号码"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.qq_chat,callback:function(t){e.$set(e.profileInfo,"qq_chat",t)},expression:"profileInfo.qq_chat"}})],1),a("a-form-model-item",{attrs:{label:"微信"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.wechat,callback:function(t){e.$set(e.profileInfo,"wechat",t)},expression:"profileInfo.wechat"}})],1),a("a-form-model-item",{attrs:{label:"微博"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.weibo,callback:function(t){e.$set(e.profileInfo,"weibo",t)},expression:"profileInfo.weibo"}})],1),a("a-form-model-item",{attrs:{label:"B站地址"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.bili,callback:function(t){e.$set(e.profileInfo,"bili",t)},expression:"profileInfo.bili"}})],1),a("a-form-model-item",{attrs:{label:"Email"}},[a("a-input",{staticStyle:{width:"300px"},model:{value:e.profileInfo.email,callback:function(t){e.$set(e.profileInfo,"email",t)},expression:"profileInfo.email"}})],1),a("a-form-model-item",{attrs:{label:"头像"}},[a("a-upload",{attrs:{listType:"picture",name:"file",action:e.upUrl,headers:e.headers},on:{change:e.avatarChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("点击上传 ")],1),a("br"),e.profileInfo.avatar?[a("img",{staticStyle:{width:"120px",height:"100px"},attrs:{src:e.profileInfo.avatar}})]:e._e()],2)],1),a("a-form-model-item",{attrs:{label:"头像背景图"}},[a("a-upload",{attrs:{listType:"picture",name:"file",action:e.upUrl,headers:e.headers},on:{change:e.imgChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("点击上传 ")],1),a("br"),e.profileInfo.img?[a("img",{staticStyle:{width:"120px",height:"100px"},attrs:{src:e.profileInfo.img}})]:e._e()],2)],1),a("a-form-model-item",[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"danger"},on:{click:e.updateProfile}},[e._v("更新")])],1)],1)],1)],1)},i=[],o=(a("96cf"),a("1da1")),n=a("5bf0"),l={data:function(){return{profileInfo:{id:1,name:"",desc:"",qq_chat:"",wechat:"",weibo:"",bili:"",email:"",img:"",avatar:""},upUrl:n["a"]+"upload",headers:{}}},created:function(){this.getProfileInfo(),this.headers={Authorization:"Bearer ".concat(window.sessionStorage.getItem("token"))}},methods:{getProfileInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("profile/".concat(e.profileInfo.id));case 2:if(a=t.sent,r=a.data,200===r.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.message));case 6:e.profileInfo=r.data,console.log(e.profileInfo);case 8:case"end":return t.stop()}}),t)})))()},avatarChange:function(e){if(e.file.status,"done"===e.file.status){this.$message.success("图片上传成功");var t=e.file.response.url;this.profileInfo.avatar=t}else"error"===e.file.status&&this.$message.error("图片上传失败")},imgChange:function(e){if(e.file.status,"done"===e.file.status){this.$message.success("图片上传成功");var t=e.file.response.url;this.profileInfo.img=t}else"error"===e.file.status&&this.$message.error("图片上传失败")},updateProfile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("profile/".concat(e.profileInfo.id),e.profileInfo);case 2:if(a=t.sent,r=a.data,200===r.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.message));case 6:e.$message.success("个人信息更新成功"),e.$router.push("/admin/index");case 8:case"end":return t.stop()}}),t)})))()}}},s=l,f=a("2877"),c=Object(f["a"])(s,r,i,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=Index.8457b1b8.js.map